webpackJsonp([33],{"4b+T":function(e,t,n){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"allType"},[1==e.moneyApply?a("div",{staticClass:"return_money_apply"},[a("div",{staticClass:"header"},[a("span",{staticClass:"returnBack",on:{click:e.returnBack}},[a("img",{attrs:{src:n("DVIo"),alt:""}})]),e._v(" "),a("span",{staticClass:"orderTitle"},[e._v("退款申请")])]),e._v(" "),a("div",{staticClass:"grayLine"}),e._v(" "),a("div",{staticClass:"returnReason",on:{click:e.shutDownChooseReason}},[a("span",[e._v("申退原因 : ")]),e._v(" "),a("div",{staticClass:"returnReasonDiv"},[a("span",{staticClass:"sp1",on:{click:function(t){return t.stopPropagation(),e.chooseReturnMoneyReason(t)}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.selectReason,expression:"selectReason"}],attrs:{type:"text",readonly:""},domProps:{value:e.selectReason},on:{input:function(t){t.target.composing||(e.selectReason=t.target.value)}}}),e._v(" "),a("img",{staticClass:"img",attrs:{src:n("f2xs"),alt:""}})]),e._v(" "),a("ul",{staticClass:"returnReasonUL"},e._l(e.options,function(t){return a("li",{on:{click:function(n){e.clickLiChooseReason(t)}}},[e._v("\n            "+e._s(t.label)+"\n          ")])}))])]),e._v(" "),a("div",{staticClass:"return"},[a("span",{staticClass:"returnWord"},[e._v("退款金额 : ")]),e._v(" "),a("span",{staticClass:"returnNum"},[e._v("￥"+e._s(e.refundMoney))])]),e._v(" "),a("div",{staticClass:"returnReasonArea"},[a("div",{staticClass:"returnReasonAreaWord"},[e._v("\n        退款说明 :\n      ")]),e._v(" "),a("div",{staticClass:"returnReasonAreaInput"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.enterReason,expression:"enterReason"}],attrs:{placeholder:"货物发错了，我不想要了"},domProps:{value:e.enterReason},on:{input:function(t){t.target.composing||(e.enterReason=t.target.value)}}})])]),e._v(" "),a("div",{staticClass:"apply"},[a("mt-button",{staticClass:"submitApply",attrs:{size:"small"},on:{click:e.submitApplyRefundMoney}},[e._v("提交申请")])],1)]):e._e(),e._v(" "),2==e.moneyApply?a("div",{staticClass:"return_good_apply"},[a("div",{staticClass:"header"},[a("span",{staticClass:"returnBack",on:{click:e.returnBack}},[a("img",{attrs:{src:n("DVIo"),alt:""}})]),e._v(" "),a("span",{staticClass:"orderTitle"},[e._v("退货申请")])]),e._v(" "),a("div",{staticClass:"grayLine"}),e._v(" "),a("div",{staticClass:"returnReason",on:{click:e.shutDownChooseReason}},[a("span",[e._v("申退原因 : ")]),e._v(" "),a("div",{staticClass:"returnReasonDiv"},[a("span",{staticClass:"sp1",on:{click:function(t){return t.stopPropagation(),e.chooseReturnMoneyReason(t)}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.selectReason,expression:"selectReason"}],attrs:{type:"text",readonly:""},domProps:{value:e.selectReason},on:{input:function(t){t.target.composing||(e.selectReason=t.target.value)}}}),e._v(" "),a("img",{staticClass:"img",attrs:{src:n("f2xs"),alt:""}})]),e._v(" "),a("ul",{staticClass:"returnReasonUL"},e._l(e.options,function(t){return a("li",{on:{click:function(n){e.clickLiChooseReason(t)}}},[e._v("\n            "+e._s(t.label)+"\n          ")])}))])]),e._v(" "),a("div",{staticClass:"return"},[a("span",{staticClass:"returnWord"},[e._v("退款金额 : ")]),e._v(" "),a("span",{staticClass:"returnNum"},[e._v("￥"+e._s(e.refundMoney))])]),e._v(" "),a("div",{staticClass:"returnReasonArea"},[a("div",{staticClass:"returnReasonAreaWord"},[e._v("\n        退货说明 :\n      ")]),e._v(" "),a("div",{staticClass:"returnReasonAreaInput"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.enterReason,expression:"enterReason"}],attrs:{placeholder:"请简要说明退货原因"},domProps:{value:e.enterReason},on:{input:function(t){t.target.composing||(e.enterReason=t.target.value)}}})])]),e._v(" "),a("div",{staticClass:"grayLine"}),e._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"z_photo"},[!e.isWeChat&&!e.isIos||e.isIos?a("div",{directives:[{name:"show",rawName:"v-show",value:!e.showAddPic,expression:"!showAddPic"}],staticClass:"z_file",on:{click:e.showNotPic}},[a("img",{attrs:{src:n("jF/0"),alt:""}})]):e._e(),e._v(" "),!e.isWeChat&&!e.isIos||e.isIos?a("div",{directives:[{name:"show",rawName:"v-show",value:e.showAddPic,expression:"showAddPic"}],staticClass:"z_file"},[a("input",{attrs:{type:"file",name:"file",id:"file",value:"",accept:"image/*"},on:{change:function(t){e.imgChange("z_photo","z_file")}}})]):e._e(),e._v(" "),e.showAddPic&&!e.isIos?a("div",{ref:"camera_box",staticClass:"z_file",attrs:{id:"fileBox"}}):e._e(),e._v(" "),e.isWeChat&&!e.isIos?a("div",{staticClass:"weChatDiv"}):e._e()])]),e._v(" "),a("div",{staticClass:"apply"},[a("mt-button",{staticClass:"submitApply",attrs:{size:"small"},on:{click:e.submitApplyRefundGood}},[e._v("提交申请")])],1)]):e._e()])},staticRenderFns:[]}},"5ltq":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("qONS"),s=(n.n(a),n("UQTY")),i=n.n(s),o=n("mvHQ"),r=n.n(o),d=n("OgVB"),l=(n.n(d),n("/Lyv")),c=n.n(l),u=n("34+y"),m=(n.n(u),n("X+yh")),h=n.n(m),p=n("I3G/"),f=(n.n(p),n("d1wj")),g=n("ZoQJ"),v=n("YaEn");t.default={name:"afterSellService_list",data:function(){return{enterReason:"",selectedGood:"",enterGoodReason:"",isTop:!0,isClick:!0,params:{},entity:"",options:[],orderItemId:"",refundMoney:"",refundType:"",loginCode:"",userId:"",imgParams:"",picBase:"",picUrl:"",refundGoodsImg:[],showAddPic:!0,moneyApply:3,timestamp:"",nonceStr:"",weixinSignature:"",isWeChat:"",localIds:"",serverId:"",isDisabled:!0,isIos:"",selectReason:"",chooseReason:""}},mounted:function(){this.getEchoRefund(),this.getReason(),this.checkIsIosOrAndroid()},methods:{returnBack:function(){"01"==(this.$route.query.history||"")?this.$router.go(-1):this.$router.push({path:"afterSellService_list"})},getReason:function(){var e=this;!function(e,t){var n=e.documentElement,a="orientationchange"in window?"orientationchange":"resize",s=function(){var e=n.clientWidth};e.addEventListener&&(t.addEventListener(a,s,!1),e.addEventListener("DOMContentLoaded",s,!1))}(document,window);var t=HOST_HDPORDERS+"/order/public/dictListByType/";this.$resource(t).get({type:"REFUND_REASON"}).then(function(t){200==t.status&&(200==t.body.code?e.options=t.body.list:h()({message:t.body.msg,position:"center",duration:3e3}))})},chooseReturnMoneyReason:function(){document.getElementsByClassName("returnReasonUL")[0].style.height="auto"},clickLiChooseReason:function(e){this.selectReason=e.value,document.getElementsByClassName("returnReasonUL")[0].style.height="0"},shutDownChooseReason:function(){document.getElementsByClassName("returnReasonUL")[0].style.height="0"},checkIsIosOrAndroid:function(){var e=navigator.userAgent,t=this;e.indexOf("Android")>-1||e.indexOf("Adr")>-1?(this.isIos=!1,this.checkIsWeChat()):this.isIos=!0,setTimeout(function(){var e=document.getElementById("fileBox");if(e&&!document.getElementById("file")){var n=document.createElement("input");n.type="file",n.accept="image/*",n.id="file",n.name="file",n.className="file1",$(n).attr("multiple","multiple"),e.appendChild(n),n.addEventListener("change",function(){t.imgChange("z_photo","z_file")})}},100)},checkIsWeChat:function(){var e=this;this.$nextTick(function(){"micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i)?(e.isWeChat=!0,e.getSignature()):e.isWeChat=!1})},getSignature:function(){var e=this,t=HOST_HDPUSER+"/weixin/getSignature",n=window.location.href.split("#")[0];this.nonceStr=Math.random().toString(36).substr(2),this.timestamp=(new Date).getTime().toString().substr(0,10),this.$resource(t).get({url:n,nonceStr:this.nonceStr,timestamp:this.timestamp}).then(function(t){200==t.body.code?(e.weixinSignature=t.body.signature,wx.config({appId:"wxa7187fa65b31924e",timestamp:e.timestamp,nonceStr:e.nonceStr,signature:e.weixinSignature,jsApiList:["chooseImage","previewImage","uploadImage","downloadImage"]})):h()({message:t.body.msg,position:"center",duration:3e3})})},upWeChatPic:function(){var e=this;document.getElementsByClassName("z_addImg").length>=4?h()({message:"最多上传4张图片",duration:2e3,className:"toast"}):wx.ready(function(){wx.chooseImage({count:1,sizeType:["compressed"],sourceType:["album","camera"],success:function(t){e.localIds=t.localIds,wx.uploadImage({localId:e.localIds.toString(),isShowProgressTips:1,success:function(t){var n=t.serverId,a=HOST_HDPORDERS+"/order/public/uploadWeiXinWebFile";e.$resource(a).get({mediaId:n,ext:"jpg"}).then(function(t){if(200==t.body.code){e.picUrl="http://"+(HOST_IMGFILEPATH+t.body.entity);var n=document.createElement("img");n.setAttribute("src",e.picUrl),n.setAttribute("width","110px"),n.setAttribute("height","110px");var a=document.createElement("span");a.appendChild(n),a.setAttribute("class","z_addImg"),document.getElementsByClassName("weChatDiv")[0].appendChild(a),n.onload=function(){this.onclick=function(){var e=this;c.a.confirm("确定要删除该图片吗?").then(function(t){e.parentNode.remove()},function(){})}}}})},fail:function(e){alert("上传失败，msg："+r()(e))}})}})})},imgChange:function(e,t){i.a.open("加载中...");for(var n=document.getElementsByClassName("z_addImg"),a=this,s=document.getElementById("file"),o=document.getElementsByClassName(e)[0],r=s.files,d=(document.getElementsByClassName(t)[0],[]),l=0;l<r.length;l++){var u=s.files[l];if(-1!==u.type.indexOf("image")){var m=new FileReader;m.onload=function(e){var t=e.target.result;a.picBase=t},m.readAsDataURL(u)}setTimeout(function(){if(a.picBase){var e=HOST_UPIMAGES;Object(f.d)({url:e,data:{fileStr:a.picBase}}).then(function(e){if(200==e.code){i.a.close(),a.picUrl="http://"+(HOST_IMGFILEPATH+e.filePath),d.push(a.picUrl);var t=document.createElement("img");t.setAttribute("src",a.picUrl),t.setAttribute("width","110px"),t.setAttribute("height","110px");var s=document.createElement("span");s.setAttribute("class","z_addImg"),s.appendChild(t),o.appendChild(s),t.onload=function(){n.length>=4&&(a.showAddPic=!1),this.onclick=function(){var e=this;c.a.confirm("确定要删除该图片吗?").then(function(t){e.parentNode.remove(),n.length<4&&(a.showAddPic=!0)},function(){})}}}})}},300)}},showNotPic:function(){h()({message:"最多上传4张图片",duration:2e3,className:"toast"})},submitApplyRefundMoney:function(){if(""==this.enterReason)return h()({message:"请填写理由",position:"center",duration:1200}),!1;var e=HOST_HDPORDERS+"/order/front/addRefund/";Object(f.d)({url:e,data:{orderItemId:this.orderItemId,refundMoney:this.refundMoney,refundReason:this.selectReason,refundType:this.refundType,applyAccount:this.enterReason}}).then(function(e){200==e.code?(Object(g.f)("提交申退成功！"),v.a.push({path:"afterSellService_list"})):h()({message:e.msg,position:"center",duration:3e3})})},getEchoRefund:function(){this.refundType=this.$route.query.refundType,1==this.refundType?this.moneyApply=1:2==this.refundType&&(this.moneyApply=2),this.refundMoney=this.$route.query.refundMoney,this.orderItemId=this.$route.query.orderItemId},submitApplyRefundGood:function(){var e=this;if(""==this.enterReason)return h()({message:"请填写理由",position:"center",duration:1200}),!1;var t=HOST_HDPORDERS+"/order/front/addRefund/",n=document.getElementsByClassName("z_addImg");if(n.length>0)for(var a=0;a<n.length;a++)this.refundGoodsImg.push(n[a].getElementsByTagName("img")[0].src);this.refundGoodsImg.length>1?this.refundGoodsImg=this.refundGoodsImg.join(","):1==this.refundGoodsImg.length?this.refundGoodsImg=this.refundGoodsImg[0]:this.refundGoodsImg="",this.params={orderItemId:this.orderItemId,refundMoney:this.refundMoney,refundReason:this.selectReason,refundType:this.refundType,applyAccount:this.enterReason,refundGoodsImg:this.refundGoodsImg},Object(f.d)({url:t,data:{orderItemId:this.orderItemId,refundMoney:this.refundMoney,refundReason:this.selectReason,refundType:this.refundType,applyAccount:this.enterReason,refundGoodsImg:this.refundGoodsImg}}).then(function(t){if(200==t.code)Object(g.f)("提交申退成功！"),v.a.push({path:"afterSellService_list"});else if(-1==t.code){var n=HOST_HDPUSER+"/user/isLogin";e.loginCode=window.localStorage.getItem("loginCode"),e.userId=window.localStorage.getItem("userId"),e.$resource(n).get({loginCode:e.loginCode}).then(function(t){200==t.status&&t.data.code<0&&(window.location.href=window.location.href.substring(0,window.location.href.lastIndexOf("/")+1)+"login",window.localStorage.setItem("goodUrl",window.location.href.substring(0,window.location.href.lastIndexOf("/")+1)+"good_detail?commodityId="+e.$route.query.commodityId))})}else h()({message:t.msg,position:"center",duration:3e3})})}},watch:{selectReason:function(){""!=this.selectReason&&""!=this.enterReason?this.isDisabled=!1:this.isDisabled=!0},enterReason:function(){""!=this.enterReason&&""!=this.selectReason?this.isDisabled=!1:this.isDisabled=!0}}}},UA6W:function(e,t,n){var a=n("r1uf");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("rjj0")("095fb0ac",a,!0)},jUpz:function(e,t,n){n("UA6W");var a=n("VU/8")(n("5ltq"),n("4b+T"),"data-v-6cb47ed6",null);e.exports=a.exports},r1uf:function(e,t,n){t=e.exports=n("FZ+f")(),t.push([e.i,"\nimg[data-v-6cb47ed6]{\n  width:100%;\n  height:100%;\n}\nspan[data-v-6cb47ed6]{\n  display: inline-block;\n}\n.grayLine[data-v-6cb47ed6]{\n  width:100%;\n  height:1rem;\n  background: #f4f4f4;\n}\n.allType[data-v-6cb47ed6]{\n  width:100%;\n  height:100%;\n  background: #f4f4f4;\n  overflow-x: hidden;\n}\n.allType  .header[data-v-6cb47ed6]{\n  padding: 1.3rem 0;\n  background: #fff;\n}\n.allType  .header .orderTitle[data-v-6cb47ed6]{\n  font-size:1.6rem;\n  color: #333;\n}\n.allType  .header .returnBack[data-v-6cb47ed6]{\n  float: left;\n  margin-left:0.9rem;\n  width:1rem;\n  height:2rem;\n}\n.allType .returnReason[data-v-6cb47ed6]{\n  padding: 1.4rem 0.8rem;\n  font-size:1.5rem;\n  text-align: left;\n  background: #fff;\n  width:35.9rem;\n  margin: 0 auto;\n  position: relative;\n  display: -ms-flexbox;\n  display: flex;\n  display: -webkit-flex;\n  -ms-flex-pack: justify;\n      justify-content: space-between;\n  -webkit-justify-content: space-between;\n}\n.allType .returnReason .returnReasonDiv[data-v-6cb47ed6]{\n  font-size:1.5rem;\n  color: #333;\n}\n.allType .returnReason .returnReasonDiv input[data-v-6cb47ed6]{\n  font-size:1.4rem;\n}\n.allType .returnReason .returnReasonDiv .sp1[data-v-6cb47ed6]{\n  width: 100%;\n  display: -ms-flexbox;\n  display: flex;\n  display: -webkit-flex;\n  -ms-flex-pack: justify;\n      justify-content: space-between;\n  -webkit-justify-content: space-between;\n  -ms-flex-align: center;\n      align-items: center;\n  -webkit-align-items: center;\n}\n.allType .returnReason .returnReasonDiv .sp1 .img[data-v-6cb47ed6]{\n  width:1rem;\n  height:0.6rem;\n}\n.allType .returnReason .returnReasonUL[data-v-6cb47ed6]{\n  margin-right:6rem;\n  height:0;\n  overflow: hidden;\n  width:100%;\n}\n.allType .returnReason .returnReasonUL li[data-v-6cb47ed6]{\n  line-height:2rem;\n  border: 1px solid #D6D6D6;\n  padding: 0.3rem 3rem;\n}\n.allType .returnReason select[data-v-6cb47ed6]{\n  width:26.2rem;\n  font-size:1.2rem;\n  border:0;\n  padding: 1rem 0;\n}\n.allType .returnReason select option[data-v-6cb47ed6]{\n  height:10px;\n}\n.allType .return[data-v-6cb47ed6]{\n  font-size:1.5rem;\n  display: -ms-flexbox;\n  display: flex;\n  display: -webkit-flex;\n  padding:2.4rem 0.8rem;\n  width:35.9rem;\n  margin: 0 auto;\n}\n.allType .return .returnNum[data-v-6cb47ed6]{\n  color: #cd141c;\n}\n.allType .returnReasonArea[data-v-6cb47ed6]{\n  text-align: left;\n  font-size:1.5rem;\n  height:15rem;\n  background: #fff;\n  width:35.9rem;\n  margin: 0 auto;\n  padding: 1.5rem 0.8rem;\n}\n.allType .returnReasonArea .returnReasonAreaWord[data-v-6cb47ed6]{\n  margin: 1.5rem 0 1.7rem 0;\n  font-size:1.5rem;\n}\n.allType .returnReasonArea .returnReasonAreaInput textarea[data-v-6cb47ed6]{\n  width:100%;\n  height:8.8rem;\n  border: 0;\n  font-size:1.2rem;\n}\n.allType .apply[data-v-6cb47ed6]{\n  margin: 2.5rem auto 0;\n}\n.allType .apply .submitApply[data-v-6cb47ed6]{\n  width:35.9rem;\n  background: #F9BE00;\n  font-size:1.7rem !important;;\n  color:#fff;\n  height:4.3rem !important;\n}\n.allType .apply .submitApply.nextBtn1[data-v-6cb47ed6]{\n  background: #d6d6d6;\n  width:35.9rem;\n  font-size:1.7rem !important;\n  color:#fff;\n  height:4.3rem !important;\n}\n.assess_image[data-v-6cb47ed6]{\n  width:100%;\n  height: 7.5rem;\n  line-height: 7.5rem;\n  font-size: 1.5rem;\n  color: #868686;\n  text-align: left;\n  display: -ms-flexbox;\n  display: flex;\n  display: -webkit-flex;\n  background: #fff;\n  padding: 1rem 0.8rem;\n  -ms-flex-align: center;\n      align-items: center;\n  -webkit-align-items: center;\n  position: relative;\n}\n.assess_image img[data-v-6cb47ed6]{\n  width:5.5rem;\n  height:5.5rem;\n  margin-right: 1rem;\n}\n.container[data-v-6cb47ed6] {\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  clear: both;\n}\n.z_photo[data-v-6cb47ed6] {\n  width: 100%;\n  height: 10rem;\n  padding: 0.3rem;\n  overflow: auto;\n  clear: both;\n  margin: 1rem auto;\n  float: left;\n  background: #fff;\n  display: -ms-flexbox;\n  display: flex;\n  display: -webkit-flex;\n  -ms-flex-pack: start;\n      justify-content: flex-start;\n  -webkit-justify-content: flex-start;\n  -ms-flex-align: center;\n      align-items: center;\n  -webkit-align-items: center;\n}\n.z_photo img[data-v-6cb47ed6] {\n  width: 5.5rem;\n  height: 5.5rem;\n}\n.z_addImg[data-v-6cb47ed6] {\n  float: left;\n  margin-right: 0.2rem;\n  width:5.5rem;\n  height:5.5rem;\n  margin-left: 1rem;\n}\n.z_addImg img[data-v-6cb47ed6]{\n  width:5.5rem;\n  height:5.5rem;\n}\n#file[data-v-6cb47ed6]{\n  width:5.5rem;\n  height:5.5rem;\n}\n.z_file[data-v-6cb47ed6] {\n  width: 5rem;\n  height: 5rem;\n  background: url("+n("jF/0")+") no-repeat left top;\n  background-size: 100% 100%;\n  float: left;\n  margin-right: 0.5rem;\n}\n.z_file input[data-v-6cb47ed6]::-webkit-file-upload-button {\n  width: 1rem;\n  height: 1rem;\n  border: none;\n  position: absolute;\n  outline: 0;\n  opacity: 0;\n}\n.z_file input#file[data-v-6cb47ed6] {\n  display: block;\n  width: auto;\n  border: 0;\n  vertical-align: middle;\n  color: #fff;\n}\n\n",""])}});