webpackJsonp([29],{AyUH:function(e,t,n){var i=n("R3lp");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n("rjj0")("2b9e08a2",i,!0)},CCJW:function(e,t,n){n("AyUH");var i=n("VU/8")(n("EacD"),n("fbi3"),"data-v-2ad43960",null);e.exports=i.exports},EacD:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("34+y"),a=(n.n(i),n("X+yh")),s=n.n(a),r=n("ZoQJ"),o=n("I3G/"),m=n.n(o);t.default={name:"setPassword",data:function(){return{timer:60,stop:!1,Interval:null,ifRegister:!1,isText:!1,isPsd:!0,loginpwd:"",admin:"",verification:"",loginAlert:!1,AlertChange:!1,numberTime:0,frequently:!1,newTime1:"",newTime2:"",newTime3:"",newTime4:"",clearNumber:!1,clearNumber3:!1,acb1:"",acb2:""}},mounted:function(){},watch:{admin:function(){var e=this;if(11==this.admin.length){var t=HOST_HDPUSER+"/user/verifyPhoneNum";this.loginCode=window.localStorage.getItem("loginCode"),this.$resource(t).get({phoneNum:this.admin}).then(function(t){200==t.status&&(console.log(t),100==t.data.code?e.ifRegister=!0:200==t.data.code&&s()({message:"该用户不是网库用户",duration:3e3,className:"toast"}))})}""!=this.admin&&""!=this.verification?this.AlertChange=!0:this.AlertChange=!1,""!=this.admin?this.clearNumber=!0:this.clearNumber=!1},verification:function(){""!=this.admin&&""!=this.verification?this.AlertChange=!0:this.AlertChange=!1,""!=this.verification?this.clearNumber3=!0:this.clearNumber3=!1}},methods:{focusDelete1:function(){this.acd1=1,this.admin&&(this.clearNumber=!0)},focusDelete2:function(){this.acd2=2,this.verification&&(this.clearNumber3=!0)},blurDelete:function(){this.clearNumber=!1,this.clearNumber3=!1,1==this.acd1&&this.admin&&(this.clearNumber=!0),2==this.acd2&&this.verification&&(this.clearNumber3=!0),this.acd1="",this.acd2=""},clearNumber1:function(){this.admin=""},clearNumber2:function(){this.verification=""},Login1:function(e){11!=this.admin.length&&""!=this.admin.length?s()({message:"请输入正确手机号",duration:3e3,className:"toast"}):""==this.admin.length?s()({message:"请输入手机号",duration:3e3,className:"toast"}):""==this.verification.length&&s()({message:"请输入验证码",duration:3e3,className:"toast"})},verifica:function(){var e=/^1[3|4|5|7|8][0-9]{9}$/,t=e.test(this.admin);""==this.admin?s()({message:"请输入手机号",duration:3e3,className:"toast"}):t||s()({message:"请输入正确手机号",duration:3e3,className:"toast"})},setPassword:function(){var e=this,t=HOST_HDPUSER+"/user/verifyCode";this.loginCode=window.localStorage.getItem("loginCode"),this.$resource(t).get({phonenum:this.admin,code:this.verification}).then(function(t){200==t.status&&(200==t.data.code?(window.localStorage.setItem("codeForget",e.verification),window.localStorage.setItem("numberForget",e.admin),window.location.href=window.location.href.substring(0,window.location.href.lastIndexOf("/")+1)+"setPasswordForget"):s()({message:t.data.message,duration:3e3,className:"toast"}))})},back:function(){1==this.$route.query.onLine?window.history.go(-3):window.history.back()},update:function(){this.timer<=0?(this.timer=60,clearInterval(this.Interval),this.stop=!1):this.timer--},startTimer:function(){var e=this,t=this;t.numberTime++,console.log(t.numberTime),1==t.numberTime&&(t.newTime1=new Date),2==t.numberTime&&(t.newTime2=new Date,t.newTime1.getTime()+3e5<t.newTime2.getTime()&&(t.frequently=!1,t.numberTime=0)),3==t.numberTime&&(t.newTime3=new Date,t.newTime1.getTime()+3e5<t.newTime3.getTime()&&(t.frequently=!1,t.numberTime=0),t.frequently=!0),4==t.numberTime&&(t.frequently=!0),this.stop=!0,1==this.stop?this.Interval=setInterval(this.update,1e3):clearInterval(this.Interval),this.timer=this.timer;var n=void 0,i=Object(r.g)("2016091011111990","1234567890123456",this.admin);m.a.http.interceptors.push(function(e,t){e.headers.set("digest",i),t(function(e){return e})}),this.$http.post(HOST_HDPUSER+"/user/getToken").then(function(e){n=e.body.respBody}).then(function(t){var i=e.admin+"_"+(new Date).getTime(),a=Object(r.g)(n,"1234567890123456",i);e.$resource(HOST_HDPUSER+"/user/sendEncryptedMessage").get({phoneNum:encodeURI(a)}).then(function(e){200==e.status&&(console.log(e),200==e.data.code||s()({message:e.data.message,duration:3e3,className:"toast"}))})}),this.loginCode=window.localStorage.getItem("loginCode")},startTimer1:function(){var e=this,t=new Date;e.newTime3.getTime()-e.newTime1.getTime()+(t-e.newTime3.getTime())>3e5?(e.frequently=!1,e.numberTime=0,e.startTimer()):(s()({message:"操作频繁，5分钟之内点击3次",duration:3e3,className:"toast"}),e.frequently=!0)},tiShi:function(){var e=/^1[3|4|5|7|8][0-9]{9}$/,t=e.test(this.admin);""==this.admin?s()({message:"请输入手机号",duration:3e3,className:"toast"}):t||s()({message:"请输入正确手机号",duration:3e3,className:"toast"})}}}},R3lp:function(e,t,n){t=e.exports=n("FZ+f")(),t.push([e.i,'\n.login-admin[data-v-2ad43960]{\n  position: absolute;\n  top: 1.7rem;\n  right: 0.8rem;\n  width: 2rem;\n  height: 2rem;\n}\n.login-verification[data-v-2ad43960]{\n  position: absolute;\n  top: 7.2rem;\n  right: 10rem;\n  width: 2rem;\n  height: 2rem;\n}\n.setPassword[data-v-2ad43960]{\n  width:100%;\n  height:100%;\n  background:#fff;\n}\n.setPassword-img[data-v-2ad43960]{\n  width:100%;\n  /*position:relative;*/\n  display: block;\n  color: #252525;\n  font-size: 1.8rem;\n  height: 4rem;\n  line-height: 4rem;\n}\n.setPassword-img img[data-v-2ad43960]{\n  width: 1.2rem;\n  height: 2rem;\n  margin-top: 1rem;\n  position: absolute;\n  left: 1.2rem;\n  /*margin-left: -28rem;*/\n}\n.setPassword-line[data-v-2ad43960]{\n  height: 1rem;\n  background: #f4f4f4;\n  width: 100%;\n  border-top:1px solid #d8d8d8;\n}\n.setPassword-input[data-v-2ad43960]{\n  width:92%;\n  margin-left: 4%;\n  position:relative;\n}\n.setPassword-input input[data-v-2ad43960]{\n  width:100%;\n  height:5.5rem;\n  padding-left:1.4rem;\n  font-size: 1.4rem;\n  -webkit-box-shadow:0;\n  -webkit-appearance:none;\n  outline:none;\n  box-sizing: border-box;\n  background-color:transparent;\n  FILTER: alpha(opacity=0); /*androd*/\n  appearance:none;  /*下拉框去掉右侧图标*/\n  -moz-appearance:none;\n  -webkit-appearance:none;\n}\n.setPassword-input-admin[data-v-2ad43960]{\n  /*background: url("../../assets/images/密码-icon.png") no-repeat 10px ;*/\n  border-bottom:1px solid #acacac;\n  width: 1.1rem;\n  height: 1.5rem;\n}\n.setPassword-input-psd[data-v-2ad43960]{\n  border-bottom:1px solid #acacac;\n  /*background: url("../../assets/images/手机-icon.png") no-repeat 10px;*/\n  width: 1.1rem;\n  height: 1.5rem;\n}\n.active[data-v-2ad43960]{\n  background:#f9be00;\n}\n.login-btn[data-v-2ad43960] {\n  width: 92%;\n  height: 4.4rem;\n  background: #d8d8d8;\n  font-size: 1.7rem;\n  color: #fff;\n  letter-spacing: 0.2rem;\n  text-align: center;\n  line-height: 4.4rem;\n  margin-left: 4%;\n  margin-top: 3.5rem;\n  border-radius: 0.2rem;\n}\n.login-btn1[data-v-2ad43960] {\n  width: 92%;\n  height: 4.4rem;\n  background: #f9be00;\n  font-size: 1.7rem;\n  color: #fff;\n  letter-spacing: 0.2rem;\n  text-align: center;\n  line-height: 4.4rem;\n  margin-left: 4%;\n  margin-top: 3.5rem;\n  border-radius: 0.2rem;\n}\n/*.login-btn-time {*/\n  /*!*padding: 0 0.5rem;*!*/\n  /*height: 2.5rem;*/\n  /*float: right;*/\n  /*border: 1px solid #f9be00;*/\n  /*background: #fff;*/\n  /*border-radius: 0.4rem;*/\n  /*color: #f9be00;*/\n  /*line-height: 2.5rem;*/\n  /*font-size: 1.4rem;*/\n  /*position: absolute;*/\n  /*right: 0;*/\n  /*top:1rem;*/\n  /*width: 8rem;*/\n  /*text-align: center;*/\n/*}*/\n.login-btn-time[data-v-2ad43960]{\n  /*padding: 0 1rem;*/\n  height: 3rem;\n  float: right;\n  /*border: 0.1rem solid #f9be00;*/\n  /*background:#fff;*/\n  border-radius: 0.4rem;\n  color: #f9be00;\n  line-height: 3rem;\n  font-size: 1.4rem;\n  position: absolute;\n  right: 0;\n  width: 8rem;\n  text-align: center;\n  top:6.8rem;\n}\n.login-btn-time1[data-v-2ad43960]{\n  /*padding: 0 1rem;*/\n  height: 3rem;\n  width: 6rem;\n  float: right;\n  /*border: 1px solid #acacac;*/\n  /*background:#fff;*/\n  border-radius: 0.4rem;\n  color: #acacac;\n  line-height: 3rem;\n  font-size: 1.4rem;\n  position: absolute;\n  right: 0;\n  text-align: center;\n  margin-top: 6.8rem;\n  width: 8rem;\n  text-align: center;\n}\n',""])},fbi3:function(e,t,n){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"setPassword",on:{click:function(t){e.blurDelete()}}},[i("div",{staticClass:"setPassword-img clearfix"},[e._v("\n    重置密码\n    "),i("img",{attrs:{src:n("DVIo")},on:{click:function(t){e.back()}}})]),e._v(" "),i("div",{staticClass:"setPassword-line"}),e._v(" "),i("div",{staticClass:"setPassword-input"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.stop&&e.ifRegister&&!e.frequently,expression:"!stop && ifRegister && !frequently"}],staticClass:"login-btn-time",on:{click:e.startTimer}},[e._v("获取验证码")]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.stop&&e.ifRegister&&e.frequently,expression:"!stop && ifRegister && frequently"}],staticClass:"login-btn-time",on:{click:e.startTimer1}},[e._v("获取验证码")]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.stop&&!e.ifRegister,expression:"!stop && !ifRegister"}],staticClass:"login-btn-time",on:{click:e.tiShi}},[e._v("获取验证码")]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.stop,expression:"stop"}],staticClass:"login-btn-time1"},[e._v(e._s(e.timer)+"s")]),e._v(" "),e.clearNumber?i("img",{staticClass:"login-admin",attrs:{src:n("7YKH")},on:{click:function(t){e.clearNumber1()}}}):e._e(),e._v(" "),e.clearNumber3?i("img",{staticClass:"login-verification",attrs:{src:n("7YKH")},on:{click:function(t){e.clearNumber2()}}}):e._e(),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.admin,expression:"admin"}],staticClass:"setPassword-input-admin",attrs:{type:"text",placeholder:"手机号"},domProps:{value:e.admin},on:{focus:function(t){e.focusDelete1()},input:function(t){t.target.composing||(e.admin=t.target.value)}}}),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.verification,expression:"verification"}],staticClass:"setPassword-input-admin",attrs:{type:"text",placeholder:"请输入验证码"},domProps:{value:e.verification},on:{focus:function(t){e.focusDelete2(),e.verifica()},input:function(t){t.target.composing||(e.verification=t.target.value)}}})]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.AlertChange,expression:"AlertChange"}],staticClass:"login-btn1",class:{active:e.AlertChange},on:{click:function(t){e.setPassword()}}},[e._v("下一步")]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.AlertChange,expression:"!AlertChange"}],staticClass:"login-btn",on:{click:function(t){e.Login1()}}},[e._v("下一步")])])},staticRenderFns:[]}}});